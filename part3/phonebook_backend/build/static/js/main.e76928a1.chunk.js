(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var r=t(0),c=t(1),a=t(15),u=t.n(a),o=t(6),i=t(3),s=function(e){var n=e.value,t=e.onChange;return Object(r.jsxs)("div",{children:["filter shown with",Object(r.jsx)("input",{value:n,onChange:t})]})},l=function(e){var n=e.persons,t=e.filter,c=e.handleRemove;return Object(r.jsx)(r.Fragment,{children:n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})).map((function(e){return Object(r.jsxs)("p",{children:[e.name," ",e.number,Object(r.jsx)("button",{onClick:c,value:e.id,children:"delete"})]},e.name)}))})},d=function(e){return Object(r.jsxs)("form",{onSubmit:e.submit,children:[Object(r.jsxs)("div",{children:["name: ",Object(r.jsx)("input",{value:e.name,onChange:e.onChangeName}),Object(r.jsx)("br",{}),"number: ",Object(r.jsx)("input",{value:e.number,onChange:e.onChangeNumber})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",children:"add"})})]})},b=function(e){var n=e.message,t=e.error,c=void 0!==t&&t;return null===n?null:Object(r.jsx)("div",{className:c?"error":"message",children:n})},j=t(4),f=t.n(j),m="/api/persons",h={getAll:function(){return f.a.get(m).then((function(e){return e.data}))},create:function(e){return f.a.post(m,e).then((function(e){return e.data}))},update:function(e,n){return f.a.put("".concat(m,"/").concat(e),n).then((function(e){return e.data}))},remove:function(e){return f.a.delete("".concat(m,"/").concat(e)).then((function(e){return e.data}))}},O=(t(38),function(){var e=Object(c.useState)([]),n=Object(i.a)(e,2),t=n[0],a=n[1],u=Object(c.useState)(""),j=Object(i.a)(u,2),f=j[0],m=j[1],O=Object(c.useState)(""),v=Object(i.a)(O,2),p=v[0],x=v[1],g=Object(c.useState)(""),w=Object(i.a)(g,2),C=w[0],k=w[1],S=Object(c.useState)(null),N=Object(i.a)(S,2),y=N[0],A=N[1],T=Object(c.useState)(null),D=Object(i.a)(T,2),E=D[0],I=D[1];Object(c.useEffect)((function(){h.getAll().then((function(e){a(e)}))}),[]);return Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Phonebook"}),Object(r.jsx)(b,{message:y}),Object(r.jsx)(b,{message:E,error:!0}),Object(r.jsx)(s,{value:C,onChange:function(e){k(e.target.value)}}),Object(r.jsx)("h3",{children:"Add a new"}),Object(r.jsx)(d,{submit:function(e){e.preventDefault();var n=t.find((function(e){return e.name===f}));if(n&&window.confirm("".concat(f," is already added to phonebook, replace the old number with a new one?")))return function(e){var n=Object(o.a)(Object(o.a)({},e),{},{number:p});h.update(n.id,n).then((function(e){m(""),x(""),A("Updated ".concat(e.name)),a(t.map((function(n){return n.id!==e.id?n:e}))),setTimeout((function(){A(null)}),5e3)})).catch((function(){I("".concat(n.name," was previously removed from server")),setTimeout((function(){I(null)}),5e3),a(t.filter((function(e){return e.id!==n.id})))}))}(n);var r={name:f,number:p};h.create(r).then((function(e){m(""),x(""),A("Added ".concat(e.name)),a(t.concat(e)),setTimeout((function(){A(null)}),5e3)}))},name:f,number:p,onChangeName:function(e){m(e.target.value)},onChangeNumber:function(e){x(e.target.value)}}),Object(r.jsx)("h3",{children:"Numbers"}),Object(r.jsx)(l,{persons:t,filter:C,handleRemove:function(e){var n=parseInt(e.target.value),r=t.find((function(e){return e.id===n}));window.confirm("Delete "+r.name)&&h.remove(n).then((function(){return a(t.filter((function(e){return e.id!==n})))})).catch((function(){I("".concat(r.name," was already removed from server")),setTimeout((function(){I(null)}),5e3),a(t.filter((function(e){return e.id!==r.id})))}))}})]})});u.a.render(Object(r.jsx)(O,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.e76928a1.chunk.js.map